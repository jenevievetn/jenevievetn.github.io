<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>jenevievetn.github.io - Jenevieve‚Äôs Website üß∏üçì</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">jenevievetn.github.io</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#how-do-emotions-evolve-throughout-the-harry-potter-series-including-the-development-of-individual-characters-emotional-arcs" id="toc-how-do-emotions-evolve-throughout-the-harry-potter-series-including-the-development-of-individual-characters-emotional-arcs" class="nav-link active" data-scroll-target="#how-do-emotions-evolve-throughout-the-harry-potter-series-including-the-development-of-individual-characters-emotional-arcs">How do emotions evolve throughout the Harry Potter series, including the development of individual characters‚Äô emotional arcs?</a></li>
  <li><a href="#exploring-emotional-sentiment-trends" id="toc-exploring-emotional-sentiment-trends" class="nav-link" data-scroll-target="#exploring-emotional-sentiment-trends">Exploring Emotional Sentiment Trends</a></li>
  <li><a href="#investigating-emotional-correlations" id="toc-investigating-emotional-correlations" class="nav-link" data-scroll-target="#investigating-emotional-correlations">Investigating Emotional Correlations</a></li>
  <li><a href="#determining-character-importance" id="toc-determining-character-importance" class="nav-link" data-scroll-target="#determining-character-importance">Determining Character Importance</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Jenevieve‚Äôs Website üß∏üçì</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Hello and welcome to my webpage! My name is Jenevieve and this is my first time attempting to create a data story.</p>
<p>I am a Year 1 Communications and New Media major with a minor in Interactive Media Development. This webpage serves as a platform for me to share my journey, insights and project with you.</p>
<p>Thank you for visiting!üíü</p>
<section id="how-do-emotions-evolve-throughout-the-harry-potter-series-including-the-development-of-individual-characters-emotional-arcs" class="level1">
<h1>How do emotions evolve throughout the Harry Potter series, including the development of individual characters‚Äô emotional arcs?</h1>
<p>for NM2207.</p>
<figure style="display: block; margin: 0 auto" class="figure">
  <img src="1.jpg" alt="Our first look at Harry." style="width: 384px; height: 160px; display: block; margin: 0 auto;" class="figure-img">
  <figcaption style="text-align: center;" class="figure-caption">Our first look at Harry.</figcaption>

<h2 style="text-align: center;" class="anchored" data-anchor-id="how-do-emotions-evolve-throughout-the-harry-potter-series-including-the-development-of-individual-characters-emotional-arcs">This all started with a particularly <span style="background-color: #FFCCDC;">interesting question</span>. </h2>
<p><strong>Picture this</strong>: It‚Äôs a rainy afternoon and you‚Äôre diving back into the magical world of Harry Potter, when suddenly, a curious question strikes you like a bolt of lightning‚ö° - <em>what if we could quantify the emotional impact of each chapter</em>, dissecting the highs and lows with the precision of a potion master?</p>
<h2 style="text-align: center;" class="anchored">To do this, I retrieved a proprocessed dataset which contained all Harry Potter books in txt file format, and ran them through an <span style="background-color: #FFCCDC;">emotion sentiment analyser</span> , a powerful tool promising to unveil the hidden emotional nuances nestled within the text. </h2>

<p>The difference between how readers interpret a passage's emotion sentiment and how an emotion sentiment analyser interprets the passage lies in the <u>subjective nature</u> of human emotions and the <u>objective algorithms</u> used by sentiment analysis tools.</p>
<ul>
<li><p><strong>Readers‚Äô Interpretation</strong>: Readers‚Äô interpretation of emotion sentiment is subjective and influenced by individual experiences, perspectives, and cultural backgrounds. They may perceive emotions differently based on personal context, preferences, and emotional sensitivity.</p></li>
<li><p><strong>Emotion Sentiment Analyzer‚Äôs Interpretation</strong>: Emotion sentiment analysis relies on objective algorithms to analyse text and quantify emotional content. These algorithms are trained on large datasets and use predefined rules or machine learning models to identify and categorise emotional cues in text.</p></li>
</ul>
<p>Now, let‚Äôs see how the emotion sentiment analyser interprets the Harry Potter series using the data gathered.</p>
<br>
<figure style="display: block; margin: 0 auto" class="figure">
  <img src="4.jpg" alt="Platform nine and three-quarters." style="width: 384px; height: 160px; display: block; margin: 0 auto;" class="figure-img">
  <figcaption style="text-align: center;" class="figure-caption">Platform nine and three-quarters.</figcaption>

<br>  
<p style="text-align: center;"> ‚ö°Ô∏è‚öØ üßπ </p>

<h2 class="anchored">Sentimentr Package </h2>
<p>The sentimentr package by Tyler Rinker in R is designed to accurately calculate text polarity sentiment at both the sentence and token levels. It offers enhanced precision in sentiment scoring by considering valence shifters like negators, amplifiers, de-amplifiers, and adversative conjunctions.</p>
<br>  
<p style="text-align: center;">  üìúüè∞‚åõ </p>
</figure></figure></section>
<section id="exploring-emotional-sentiment-trends" class="level1">
<h1>Exploring Emotional Sentiment Trends</h1>
<h2 class="anchored" data-anchor-id="exploring-emotional-sentiment-trends">Two Sentiments: Positive and Negative </h2>

<br>
<div style="text-align: center;">
    <iframe src="interactive_sentiment.html" width="90%" height="300"></iframe>
</div>
<br>

<p>By plotting at the sentiment score for each chapter of each book, we can clearly mark events in the books. 
The three greatest spikes in that chart above are 
<span style="color: #933289; font-weight: bold;">Cedric Diggory‚Äôs death at about chapter 88</span>, 
<span style="color: #FB924B; font-weight: bold;">Sirius Black's death at about chapter 129</span>, and 
<span style="color: #6A8E4B; font-weight: bold;">Dumbledore‚Äôs death at about chapter 159</span>.</p>
<br>  
<p style="text-align: center;"> ü¶Åüêçü¶Öü¶°</p>
<h2 class="anchored">Eight Basic Emotions: Anger, Disgust, Fear, Joy, Sadness, Surprise, Trust, and Anticipation </h2>

<div style="text-align: center;">
    <iframe height="600" width="95.99%" frameborder="no" src="https://jenevievetn.shinyapps.io/sample_app/"> </iframe>
</div>

<div style="text-align: center;">
    <iframe height="600" width="90%" frameborder="no" src="https://jenevievetn.shinyapps.io/app2/"> </iframe>
</div>
<p style="text-align: center;"> üëªüßôüìñ </p>
<h2 class="anchored">Emotional Spectrum: Insights in Pie</h2>

<h4 style="text-align: center;;" class="anchored">Distribution of Emotions in the Harry Potter Series</h4>
<figure style="display: block; margin: 0 auto" class="figure">
  <img src="piechart.png" style="width: 450px; height: 329.25px; display: block; margin: 0 auto;" class="figure-img">
<br>
<p>The piechart helps to identify which emotions are most prevalent across the series. This could indicate the overall mood or tone of the narrative.</p><p>

</p><p><span style="color: #024B8F; font-weight: bold;">Sadness</span> emerges as the dominant emotion, comprising <span style="color: #024B8F; font-weight: bold;">21%</span> of the emotional spectrum. Several factors can contribute to the prevalence of sadness in the series:</p>
<ul>
  <li>Deeply rooted themes of loss and sacrifice.</li>
  <li>Significant personal tragedies experienced by characters.</li>
  <li>Profound sadness and grief evoked by the deaths of beloved characters like Harry's parents, Sirius Black, and Dumbledore.</li>
</ul>
<br>
<p style="text-align: center;"> üßäÔ∏èü¶åüå≤</p>
<h2 style="text-align: center;" class="anchored">Having identified sadness to be the most prominent emotion in the series, I sought to explore its <span style="background-color: #FFCCDC;">potential correlations</span> with other emotions in the narrative.</h2>
<p>After obtaining an overall understanding of the emotional sentiment trends, I shifted my focus to explore deeper connections among the different emotions portrayed throughout the series.</p>
</figure></section>
<section id="investigating-emotional-correlations" class="level1">
<h1>Investigating Emotional Correlations</h1>
<br>
<figure style="display: block; margin: 0 auto" class="figure">
  <img src="8.jpg" alt="" after="" all="" this="" time?"="" "always,"="" said="" snape.="" style="width: 480px; height: 198.5px; display: block; margin: 0 auto;" class="figure-img">
  <figcaption style="text-align: center;" class="figure-caption">"After all this time?" "Always," said Snape.</figcaption>
<br>
<p>We begin by creating a correlation heat map. This visual provides insights into the correlation between different emotional states.</p>

<h2 class="anchored" data-anchor-id="investigating-emotional-correlations">Insights from Correlation Heat map </h2>

<div style="display: flex; justify-content: center;">
    <div style="flex: 1;">
        <h3 class="anchored">Emotion Correlation Heat map</h3>
        <img src="corrplot1.png" alt="corrplot1." style="width:375px; height: 275px; display: block; margin: 0 auto;" class="figure-img">
        <br>
        <p>Here's an overview of the correlations between emotions as revealed by the heat map.</p>
        <p>Emotions with the strongest <span style="background-color: #FFD5D5;">positive correlations</span> are:</p>
        <ol>
        <li>Anger and sadness at <span style="font-weight: bold;">0.87</span>.</li>
        <li>Disgust and fear at <span style="font-weight: bold;">0.7</span>.</li>
        <li>Sadness and fear at <span style="font-weight: bold;">0.61</span>.</li>
        </ol>
    </div>
    <div style="flex: 2;">
        <h3 class="anchored">Sadness-centric Line Chart Analysis</h3>
        <img src="sadness vs anger.gif" alt="sadness vs anger" style="width: 400px; height: 250px; display: block; margin: 0 auto;" class="figure-img">
        <ul>
        <li><span style="color: #024B8F; font-weight: bold;">Sadness</span> exhibits the strongest <span style="background-color: #FFD5D5;">positive correlation</span> with <span style="color: #EB022E; font-weight: bold;">anger</span> (<b>0.87</b>).</li>
        </ul>
        <img src="sadness vs joy.gif" alt="sadness vs joy" style="width: 400px; height: 250px; display: block; margin: 0 auto;" class="figure-img">
        <ul>
        <li><span style="color: #024B8F; font-weight: bold;">Sadness</span> demonstrates its most notable (albeit weak) <span style="background-color: #D5E5FF;">negative correlation</span> with <span style="color: #FB924B; font-weight: bold;">joy</span> at <b>-0.14</b>.</li>
        </ul>
    </div>
</div>
<p>The animated line charts juxtapose the emotional trajectories of <span style="color: #024B8F; font-weight: bold;">sadness</span> with <span style="color: #EB022E; font-weight: bold;">anger</span> and <span style="color: #FB924B; font-weight: bold;">joy</span>, highlighting their respective positive and negative correlations as depicted in the correlation heatmap.</p>

<p>The strong positive correlation between sadness and anger (<b>0.87</b>) can be attributed to the <u>complex emotional journeys</u> of characters like <b>Harry Potter</b> and <b>Severus Snape</b>. These characters often experience intersecting emotions in response to various events:</p>
  <ul>
  <li>Harry grapples with the <span style="background-color: #FFD5D5;">loss of loved ones, personal struggles, and betrayals</span>, which elicit a blend of sorrow and indignation.</li> 
  <li>Similarly, Severus Snape's <span style="background-color: #FFD5D5;">tragic past, conflicted loyalties and redemption arc</span> contribute to his multifaceted emotional landscape, characterised by a mixture of sadness and bitterness.</li>
  </ul>
<p> The weak negative correlation between sadness and joy (<b>-0.14</b>) in Harry Potter may <u>seem counterintuitive</u> at first glance, but it can be elucidated through the complexities of character experiences:</p>
  <ul>
  <li>While sadness pervades many instances in the series, there are also moments of <span style="background-color: #D5E5FF;">joy and camaraderie amidst the turmoil</span>.</li> 
  <li>For example, Harry and his friends find solace and moments of levity in their friendships, achievements, and triumphs against adversity.</li>
  </ul>

<br>
<p style="text-align: center;"> üé©üó°üêç</p>
<h2 style="text-align: center;" class="anchored">Due to the <u>preprocessing steps</u>* applied to the book data, there was difficulty in accurately discerning character emotions based on dialogue. To counter this, I acquired an alternative dataset containing <span style="background-color: #FFCCDC;">dialogue from the movie series</span>.</h2>

<p><span style="color: #EB022E;">*</span>particularly the removal of symbols, including speech open and inverted commas</p>
</figure></section>
<section id="determining-character-importance" class="level1">
<h1>Determining Character Importance</h1>
<br>
<figure style="display: block; margin: 0 auto" class="figure">
  <img src="9.jpg" style="width: 480px; height: 200px; display: block; margin: 0 auto;" class="figure-img">
  <figcaption style="text-align: center;" class="figure-caption">"Not me, not Hermione, YOU."</figcaption>
<br>
<p>Quantifying dialogue distribution across characters offers a straightforward method to discerning their importance within the story.</p>
<h2 class="anchored" data-anchor-id="determining-character-importance"> Key Findings from Character Dialogue Distribution Analysis</h2>
<div style="display: flex; justify-content: center;">
    <div style="flex: 1;">
        <img src="dialogue_bar.png" style="width:450px; height: 300px; display: block; margin: 0 auto;" class="figure-img">
    </div>
    <div style="flex: 1;">
        <img src="dialogue bar graph.gif" style="width: 500px; height: 300px; display: block; margin: 0 auto;" class="figure-img">
    </div>
</div>
<br>
<p>As expected, <span style="color: #00C1A3; font-weight: bold;">Harry</span> naturally assumes <span style="color: #00C1A3; font-weight: bold;">1st</span> place as the protagonist. The animated bar chart showcasing character dialogue by movie clearly highlights Harry's prominence, with his dialogues <b>dominating each installment</b> of the series.</p><p>

</p><p>However, what's striking is the <span style="font-weight: bold;">significant disparity in dialogue lines</span> between Harry and his best friend, <span style="color: #F8766D; font-weight: bold;">Ron</span>. While it is typical for the main character to take center stage, the fact that Harry's dialogue surpasses Ron's by <span style="font-weight: bold;">more than double</span> highlights the narrative's clear focus on Harry, solidifying his pivotal role to the series.</p>

<p> Another fascinating detail is <span style="color: #A3A500; font-weight: bold;">Voldemort's</span> placement as the <span style="color: #A3A500; font-weight: bold;">9th</span> character with the most dialgues in the series. Despite his relative lower dialogue count, his impact on the narrative is undeniable.</p>

<p> As the main antagonist, Voldemort embodies fear, respect, and evil, instilling terror in both characters and readers alike. His character‚Äôs presence is so potent that it <span style="font-weight: bold;">transcends the need for extensive dialogue</span>. Instead, his mere existence evokes a sense of foreboding and menace, demonstrating the power of a well-conceived and executed character.</p>


</figure></section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>